<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acceso al video</title>
</head>
<body>
    <h1>Acceso restringido</h1>
    <div id="formulario">
        <input type="password" id="password" placeholder="Introduce la contrase√±a">
        <button onclick="verificarContrase√±a()">Ir al v√≠deo</button>
    </div>
    <p id="errorMensaje" style="color: red; display: none;">‚ùå Contrase√±a incorrecta</p>
    <p id="mensaje"></p>

    <script>
        function verificarContrase√±a() {
            let contrase√±aIngresada = document.getElementById("password").value;
            let contrase√±aCorrecta = "casatalent"; // üîπ Cambia esto por la contrase√±a real

            if (contrase√±aIngresada === contrase√±aCorrecta) {
                document.getElementById("errorMensaje").style.display = "none"; // Oculta el error
                document.getElementById("formulario").style.display = "none"; // Oculta el formulario
                document.getElementById("mensaje").innerText = "Redireccionando..."; // Muestra mensaje

                // üîπ Ahora S√ç espera la contrase√±a antes de hacer fetch()
                fetch('https://script.google.com/macros/s/AKfycbzi8JmyDUvEn_POL0wttpRobyC2-9NSafKTx4jJx7hA2N6rePG6gbn5e5epJ85S39BgBA/exec')
                    .then(response => response.json())
                    .then(data => {
                        if (data.videoURL) {
                            window.location.replace(data.videoURL); // Redirecci√≥n sin guardar en historial
                        } else {
                            document.body.innerHTML = "<h1>Error: No se encontr√≥ el video</h1>";
                        }
                    })
                    .catch(error => {
                        console.error("Error al obtener la URL:", error);
                        document.body.innerHTML = "<h1>Error al obtener la URL</h1>";
                    });
            } else {
                document.getElementById("errorMensaje").style.display = "block"; // Muestra el error
            }
        }
    </script>
</body>
</html>
